const sortTabs=document.getElementById("sortTabs"),groupTabs=document.getElementById("groupTabs"),ungroupTabs=document.getElementById("ungroupTabs"),targetTabConditions={currentWindow:!0,pinned:!1,url:["http://*/*","https://*/*"],groupId:chrome.tabGroups.TAB_GROUP_ID_NONE};function sortByURL(t){return t.sort((t,e)=>{const r=t.url.toUpperCase(),o=e.url.toUpperCase();return r<o?-1:r>o?1:0}),t}function move(t){for(let e=0;e<t.length;e++)chrome.tabs.move(t[e].id,{index:e})}function getDomain(t){if(""===t.url)return"";const e=t.url.match(/https?:\/\/(.*)$/);if(null===e||void 0===e[1]||""===e[1])return"";const r=e[1].indexOf("/");return r<=0?e[1]:e[1].substr(0,r)}sortTabs.addEventListener("click",async()=>{move(sortByURL(await chrome.tabs.query(targetTabConditions)))}),groupTabs.addEventListener("click",async()=>{const t=await chrome.tabs.query(targetTabConditions),[e]=await chrome.tabs.query({currentWindow:!0,active:!0}),r=sortByURL(t);move(r);const o={};for(let t=0;t<r.length;t++){const e=getDomain(r[t]);""!==e&&(void 0===o[e]&&(o[e]=Array()),o[e].push(r[t].id))}for(let t in o){const r=await chrome.tabs.group({tabIds:o[t]}),n=!o[t].includes(e.id);chrome.tabGroups.update(r,{collapsed:n,title:t})}}),ungroupTabs.addEventListener("click",async()=>{const t=await chrome.tabs.query({currentWindow:!0,pinned:!1,url:["http://*/*","https://*/*"]}),e=Array();for(let r=0;r<t.length;r++)""!==t[r].groupId&&e.push(t[r].id);chrome.tabs.ungroup(e)});