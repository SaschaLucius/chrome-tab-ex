(()=>{const t=document.getElementById("sortTabs"),e=document.getElementById("groupTabs"),r=document.getElementById("ungroupTabs"),n={currentWindow:!0,pinned:!1,url:["http://*/*","https://*/*"],groupId:chrome.tabGroups.TAB_GROUP_ID_NONE};function o(t){return t.sort(((t,e)=>{const r=t.url.toUpperCase(),n=e.url.toUpperCase();return r<n?-1:r>n?1:0})),t}function s(t){for(let e=0;e<t.length;e++)chrome.tabs.move(t[e].id,{index:e})}function c(t){if(""===t.url)return"";const e=t.url.match(/https?:\/\/(.*)$/);if(null===e||void 0===e[1]||""===e[1])return"";const r=e[1].indexOf("/");return r<=0?e[1]:e[1].substr(0,r)}t.addEventListener("click",(async()=>{s(o(await chrome.tabs.query(n)))})),e.addEventListener("click",(async()=>{const t=await chrome.tabs.query(n),[e]=await chrome.tabs.query({currentWindow:!0,active:!0}),r=o(t);s(r);const u={};for(let t=0;t<r.length;t++){const e=c(r[t]);""!==e&&(void 0===u[e]&&(u[e]=Array()),u[e].push(r[t].id))}for(let t in u){const r=await chrome.tabs.group({tabIds:u[t]}),n=!u[t].includes(e.id);chrome.tabGroups.update(r,{collapsed:n,title:t})}})),r.addEventListener("click",(async()=>{const t=await chrome.tabs.query({currentWindow:!0,pinned:!1,url:["http://*/*","https://*/*"]}),e=Array();for(let r=0;r<t.length;r++)""!==t[r].groupId&&e.push(t[r].id);chrome.tabs.ungroup(e)}))})();